<!DOCTYPE html>
<html>
<head>
    <title>🤖 Jarvis AI机器人</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        body { font-family: Arial; margin: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 600px; margin: 0 auto; }
        .chat-box { height: 400px; border: 1px solid #333; padding: 10px; overflow-y: scroll; background: #2a2a2a; margin-bottom: 10px; }
        .input-group { display: flex; gap: 10px; }
        input { flex: 1; padding: 10px; background: #333; color: white; border: 1px solid #555; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
        .voice-btn { background: #28a745; }
        .voice-btn:hover { background: #1e7e34; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🤖 Jarvis AI机器人</h1>
        <div id="chat-box" class="chat-box"></div>
        <div class="input-group">
            <input type="text" id="message-input" placeholder="输入消息...">
            <button onclick="sendMessage()">发送</button>
            <button class="voice-btn" onclick="startListening()">🎤 语音</button>
        </div>
    </div>

    <script>
        const socket = io();
        const chatBox = document.getElementById('chat-box');
        const messageInput = document.getElementById('message-input');

        function addMessage(message, isUser = false) {
            const div = document.createElement('div');
            div.style.margin = '5px 0';
            div.style.padding = '5px';
            div.style.background = isUser ? '#007bff' : '#333';
            div.style.borderRadius = '5px';
            div.textContent = message;
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function sendMessage() {
            const message = messageInput.value.trim();
            if (message) {
                addMessage('您: ' + message, true);
                socket.emit('send_message', {message: message});
                messageInput.value = '';
            }
        }

        function startListening() {
            addMessage('🎤 正在听取语音...', false);
            socket.emit('start_listening');
        }

        socket.on('receive_message', function(data) {
            addMessage('Jarvis: ' + data.message, false);
        });

        messageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>